<!DOCTYPE html>
<html lang="en_US">
<head>
    <meta charset="utf-8" />
    <title>Our first pygame - part 2 | Game Experiments</title>

    <meta name="viewport" content="width=device-width, initial-scale=1">

    
    <meta name="author" content="Richard Porteous">
    <meta name="description" content="Various coding tutorials">
    <meta name="keywords" content="blog, site, tutorials, coding, software, programming">

    
    <link href="https://richard-porteous.github.io/css/bootswatch/darkly.min.css" rel="stylesheet">
    
    <link href="https://richard-porteous.github.io/css/font-awesome/css/font-awesome.min.css" rel="stylesheet">
    <link href="https://richard-porteous.github.io/css/custom.css" rel="stylesheet">

<link rel="icon" type="image/x-icon" href="https://richard-porteous.github.io/favicon.ico" />



<script type="text/javascript">
    var azbalacSettingHeaderMoveTitle = 'false';
</script>
<script src="https://richard-porteous.github.io/js/jquery-3.4.1.min.js"></script>
<script src="https://richard-porteous.github.io/js/functions.js"></script><style>body {}.footer-container { background-color: #29281f; }.footer-container { color: #f9fcf9; }</style>



<link id="typography-header-title-font" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Exo%3A800"><style id="typography-title" type="text/css">#site-header-text a {
        font-family: Exo;
    }#site-header-text a {
        font-size: 50px; 
    }</style>

<link id="typography-header-subtitle-font" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Exo%3A600"><style id="typography-subtitle" type="text/css">#site-description {
        font-family: Exo;
    }#site-description {
        font-size: 30px; 
    }</style>

<style id="typography-body" type="text/css"></style>

<style id="typography-navbar" type="text/css">nav#navbarMain {
        font-size: 20px; 
    }
    nav#navbarMain ul.dropdown-menu {
        font-size: 20px;
    }</style>

<link id="typography-headline-font" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans"><style id="typography-headline" type="text/css">h1, h2, h3, h4, h5, h6 {
                font-family: Open Sans; 
            }</style>



    
    <script type="text/javascript">
        var azbalacSettingHeaderColor = { 'bg': '#000000',
            'transp': '0'
            };

    </script>
    <style type="text/css">
        #site-header-text a, #site-description {
                background: "#000000";  
            background:  rgba(0,0,0,0.00);
            
        }
    </style>
    
    
    <style type="text/css">
        #site-header-box-title {
            margin-bottom: 0px;
        }
    </style>
    
    
    <style type="text/css">
        #site-header-container-overlay {
        
            left: 20px;
        
        
            top: 20px;
        
        }
    </style>
    


<!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!--[if lt IE 9]>
        <script src="//cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
        <script src="//cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->


</head>


<body>

<div id="header" role="banner" style="">

    <div class="container">
        <header class="masthead">
            <div>
                <div id="site-header-container-above" class="row align-items-center">
                    
                </div>
            </div>


            

            <div id="site-header-above"><a href="https://richard-porteous.github.io/" rel="home">
                <picture>
                        <source media="(min-width: 1200px)" srcset="https://richard-porteous.github.io/img/header_background.jpg 1110w">
                        <source media="(min-width: 992px) and (max-width: 1199.98px)" srcset="https://richard-porteous.github.io/img/header_background.jpg 930w">
                        <source media="(min-width: 768px) and (max-width: 991.98px)" srcset="https://richard-porteous.github.io/img/header_background.jpg 690w">
                        <source media="(min-width: 576px) and (max-width: 767.98px)" srcset="https://richard-porteous.github.io/img/header_background.jpg 510w">
                        <source media="(max-width: 575.98px)" srcset="https://richard-porteous.github.io/img/header_background.jpg 476w">
                        <img id="site-header-image" src="https://richard-porteous.github.io/img/header_background.jpg" style="max-width: 100%; width: 100%">
                </picture>
                </a>

                <div id="site-header-container-overlay" class="position-absolute  fixed-top ">
                    <div id="site-header-box-title" class=" d-flex justify-content-start ">
                        <h1 class="azbalac-title" id="site-header-text"><a class="header-url" style="color: #FFFFFF;" href="https://richard-porteous.github.io/">Game Experiments</a></h1>
                    </div>
                    
                    <div id="site-header-box-subtitle" class=" d-flex justify-content-start ">   
                        <h2 class="azbalac-subtitle" id="site-description" style="color: #EEEEFF;">Learn with me</h2>
                    </div>
                </div>
                
             
            </div>

    
    <nav id="navbarMain" class="navbar navbar-expand-sm justify-content-between mb-3 navbar-dark bg-primary" role="navigation">
        
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
        </button>
      
            
            <div class="sticky-top navbar-collapse collapse  " id="navbarSupportedContent"> 
                <ul class="navbar-nav">

  
  <li class="nav-item ">
    <a class="nav-link" href="/">
      
      Home
    </a>
  </li>
  <span class="mx-2"></span>
  

  
  <li class="nav-item ">
    <a class="nav-link" href="/posts/">
      
      Blog
    </a>
  </li>
  <span class="mx-2"></span>
  

  
  <li class="nav-item ">
    <a class="nav-link" href="/about/">
      
      About
    </a>
  </li>
  <span class="mx-2"></span>
  
</ul>
             
            </div>
        
            
    </nav> 
    



      </header>
    </div> 
</div>


    <div id="main">
        <div class="container">
            <div class="row"><div class="col-md" id="content">





<h1>Our first pygame - part 2</h1>

    <div class="post-meta"><span class="byline-icon fa fa-clock-o" aria-hidden="true"></span> <span class="screen-reader-text">Date: </span><time datetime="2023-08-11T13:19:30-07:00">11.08.2023</time> - 
    <span class="byline-icon fa fa-user" aria-hidden="true"></span><span class="screen-reader-text">Author: </span> Richard Porteous
     </div>


  <p>All Pygame games share some code in common. Setup, game-loop, user-input, audio etc. etc.
We will start building the common code while creating a game and we will refactor it into something reusable as we go.</p>
<p>Assuming we are new to games or pygame or python we will begin simply  by creating an object that moves and interacts with the environment.
Picture</p>
<pre><code>I assume you know some python. However if you just read the python as English it will understandable. for now # is a comment for the rest of the line. Python relies on indentation to group code.
Type the following into myapp.py
</code></pre>
<p>(if you copy paste, past first into a plain text file as plain text to remove the extra invisible characters)</p>
<pre tabindex="0"><code># the pygame imports to make them usable in our game
import pygame
from pygame.locals import *


# Initialize the pygame code
pygame.init()


#​
#
#


# quit the pygame window
pygame.quit()
#the app exits
</code></pre><p>This will run but do nothing except say something like :
pygame 2.5.2 (SDL 2.28.3, Python 3.12.0)
Hello from the pygame community. <a href="https://www.pygame.org/contribute.html">https://www.pygame.org/contribute.html</a></p>
<p>Ok lets create a window.
Replace the 3 comments in the middle with the following code</p>
<pre tabindex="0"><code># set window size
size = width, height = (800, 600)
screen = pygame.display.set_mode(size)
# update the display to see what we set
pygame.display.update()
</code></pre><pre tabindex="0"><code># control variable
game_running = True


# GAME LOOP
while game_running:
    # event listeners i.e. listen to what the user or system is doing?
    for event in pygame.event.get():
        if event.type == QUIT:
            # collapse the app
            game_running = False


    pygame.display.update()
</code></pre><p>Now you should see a window that you can exit.</p>
<ul>
<li>The Quit looks for the event to quit.</li>
<li>The game loop makes it keep checking for an event and updating the screen with the current info.</li>
<li>The display update draws the window.</li>
<li>We set the window size as 800 by 600.</li>
</ul>
<p>Ok - not interesting yet!</p>
<p>PROBLEM:
If you drew something to the screen now and then tried to move it, the item would appear in every place it redrew. Great for a paint program but useless for us.
Most beginner tutorials do 2 things which I don&rsquo;t like.</p>
<ol>
<li>They take the simple way and re-draw everything each loop. Its not bad, but not always the best.</li>
<li>They omit mentioning that movement will NOT be smooth when moving a game-object.</li>
</ol>
<p>We will address this now.
Movement
To move an object at a steady rate across the screen and make it the same for players on fast and slow computers we need to move it according to the speed it travels and that is usually measured in meters per second i.e. m/s. (convert back to an INT please, we don&rsquo;t want floating point numbers here)</p>
<p>Most game engines and frameworks and even some libraries provide you with delta time. Delta time is the time taken from one loop to the next. There are a couple of ways to do this, I will use a class. Classes are not difficult and once you start using them they provide a way to group your code in nice little self contained packages/modules/whatever - well not always, but that argument is for overdoing it.</p>
<p>Screen redrawing
Screen redrawing is a very old method of removing images redrawn elsewhere on the screen by simply redrawing everything each time you loop around in the game loop.</p>
<p>Sprites were introduced many many years ago to efficiently redraw only the small bit under the sprite and any small bits over the sprite. Pygame does support sprites - but we need to find out if they are true sprites or move of a convenience class. I plan to take a quick look at them in a post to see if they would be useful or not.</p>
<p>​Lets add the delta time code just above the game loop.</p>
<pre tabindex="0"><code># time based movement requires delta time
class deltatime():


    def __init__(self):
        self.last_loop = pygame.time.get_ticks()
        self.dt = 0


    # calculate delta time and store the time for the next loop
    def loop_time(self) -&gt; int:
        time_now_ms = pygame.time.get_ticks()
        dt = time_now_ms - self.last_loop
        self.last_loop = time_now_ms
        return dt


# end of the class and code contiues​
delta_time = deltatime()  # we initialize the class here and can now use it as an object
</code></pre><p>We can now use delta time in our loop inside the game loop and just before our event listeners:</p>
<pre tabindex="0"><code>​    # indicating the number of miliseconds since the last time that piece of code was run
    dt = delta_time.loop_time()
    print(dt) #remove this line when coding your game
</code></pre><p>If you run your code now, you&rsquo;ll see a lot of small integers being displayed to the terminal. That would be the time of each loop and because we aren&rsquo;t doing anything else the looping is fast i.e. in milliseconds or less.</p>
<p>Its time to use git again and do your second stage and commit. Type something meaningful in the message starting with the word Update. If you add files you would start with the word Add, and if fixing a bug you would use the word Fix.</p>


                </div>
                    <aside class="col-md-3 tikva-sidebar">
  


    

        <div class="col">
    <div class="p-3 mb-3 bg-light rounded">
    <h4>Coming Soon</h4>
   
    <p>    </p>
   
    </div>
</div>

    

        <div class="col">
    <div class="p-3 mb-3 bg-light rounded">
    <h4>New(ish) Site</h4>
   
    <p>    <p>I&rsquo;ve been busy moving the old sites content to these HUGO static pages. More will change soon.</p>
</p>
   
    </div>
</div>

    

</aside>
</div>
        </div>
    </div>

    
        <div class="footer-container" style="">
    <div class="container">
        <footer>

            <div class="row">
            
            
                
                    <div class="col">
    <!-- raw HTML omitted -->
<!-- raw HTML omitted -->

</div>
                
                    <div class="col">
    
</div>
                
                    <div class="col">
    
</div>
                
            

            </div>
        </footer>
    </div>
</div>
    
    
        
<div class="subfooter-container">

    <div class="container">
        <div class="footer">
            <div class="row wrapper padding">
                <div class="col-xs-12 col-md-12">

            
            
                
                        <p>Powered by <a href="https://gohugo.io">Hugo</a>. Theme <a href="https://github.com/geschke/hugo-tikva">Tikva</a> by <a href="https://www.kuerbis.org">Ralf Geschke</a>.</p>


                
            
                  
                </div>
            </div>
        </div>
    </div>
</div>

    

    <div id="media-width-detection-element"></div>

<script src="https://richard-porteous.github.io/js/popper.min.js"></script>
<script src="https://richard-porteous.github.io/js/bootstrap.min.js"></script>


</body>
</html>